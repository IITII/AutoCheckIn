# AutoCheckIn

* 江西省普通高等学校 校园防疫 健康签到 自动签到 自动打卡
* JS、Python 版本（想用哪个版本可以切分支看呢，out-of-date 就不管了，目前都能用）

### 磨叽磨叽

> 最开始做这个项目是 2020年4月份，那会疫情还比较严峻。因为快开学了，每天强制打卡。  
> 在家里待了几个月，脑子记性都不好了，时不时就忘记打卡，每次打卡的时候就会问自己好几遍今天到底有没有打卡......  
> 有一次那支付宝小程序崩了，辅导员发了一个网页...(罪恶的开始)  
> 那会 Github 还没有相关的项目，我对着网页源码撸了两天，第一版能用的自动打卡就出来了...  
> 从此天高任鸟飞，海阔凭鱼跃, 再也不用担心打卡了，再也不用每天起床对自己进行灵魂质问了，咸鱼翻身了（还是咸鱼）  
> 近期别的学校的同学问我，他们那个每天都打卡，好烦，有没有啥法子...  
> 上 Github 一搜，好家伙，遍地开花啊，这是。

* 参考以下项目，主要做了以下优化：
  1. 增加随机等待时间，让打卡时间看起来更加随机性
  2. 直接操作接口，而不是像以前那样通过浏览器执行 js 脚本实现打卡，资源占用更低
  3. 使用学号对数据进行去重（至于保留哪条，我也没在意，小心点哦）
  4. 使用 `Promise.allSettled()` 便于统计结果
  5. 日志中包含学号，更加直观，查日志排错等更方便
  6. 优化文件保存格式，数据的增删更加的方便。CSV 文件也可以用 excel 和 vim 打开。用 Excel 更加直观，也可以进行一些表格操作。
  7. 对经纬度进行随机处理，增加随机性，让打卡位置看起来更自然

> [JetXi/JiangXi-University-Antiepidemic-Batch-Clock-In](https://github.com/JetXi/JiangXi-University-Antiepidemic-Batch-Clock-In)  
> [XYZliang/AutoZFBXiaoYuanFangYiSign](https://github.com/XYZliang/AutoZFBXiaoYuanFangYiSign)

### 环境变量

|      变量名称       |    默认值    |               描述               |
| :-----------------: | :----------: | :------------------------------: |
|     AUTO_BOUND      |      10      |       经纬度模拟范围（米）       |
| AUTO_MAX_SLEEP_TIME |      30      |      随机等待一段时间（分）      |
|      AUTO_SEP       |     `#`      | 通过环境变量传入打卡数据时分隔符 |
|    AUTO_CSV_PATH    | `./info.csv` |         csv 文件存放路径         |

### 日志说明

```bash
#        时间         # 日志级别 # 学号  # 其他信息
# 随机睡眠
2021-04-04 16:06:37.034 INFO  13203116 随机睡眠 0.0 分钟...
# 登录
2021-04-04 16:06:37.046 INFO  13203116 登录中...
2021-04-04 16:06:37.449 INFO  13203116 登录成功
# 运行任务
2021-04-04 16:06:37.449 INFO  13203116 自动打卡...
2021-04-04 16:06:37.550 INFO  13203116 自动打卡成功
# 统计
2021-04-04 16:06:37.550 INFO  TOTAL 打卡成功：1
2021-04-04 16:06:37.550 INFO  TOTAL 打卡失败：0
```

### 运行

* 以 `Ubuntu 18.04` 为例

#### 直接运行

> 基本不会有打卡信息的外泄，保障隐私

```bash
sudo apt-get update
# 安装 NodeJS 环境，nvm 也可以
# curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash
sudo apt-get install -y nodejs npm git
git clone https://github.com/IITII/AutoCheckIn.git && cd AutoCheckIn
npm i
# 编辑 csv 文件，将自己的打卡信息填入即可
# 具体格式参考 info.csv 各数据项解析
vim info.csv
npm start
```

#### Github Action

> 补充中

### info.csv 各数据项解析

* [JetXi/JiangXi-University-Antiepidemic-Batch-Clock-In](https://github.com/JetXi/JiangXi-University-Antiepidemic-Batch-Clock-In)
* [拾取坐标系统，点击即可获取当前的经纬度](https://api.map.baidu.com/lbsapi/getpoint/index.html)

|             学校代码              |   学号   |   省   |  市   | 区/县 |                      具体地址                      |                    经度                    |                    纬度                    |
| :-------------------------------: | :------: | :----: | :---: | :---: | :------------------------------------------------: | :----------------------------------------: | :----------------------------------------: |
| 可在[文档末尾](#江西高校代码)查询 | 完整学号 | 江西省 | xx市  | xx区  | 详细的定位信息，可以参考校园防疫小程序中的定位结果 | 可由在线坐标拾取系统查询，建议保留六位精度 | 可由在线坐标拾取系统查询，建议保留六位精度 |

### 江西高校代码

| 学校名称                      | 学校标识码 | 主管部门     | 所在地   | 办学层次 | 备注 |
| ----------------------------- | ---------- | ------------ | -------- | -------- | ---- |
| 南昌大学                      | 4136010403 | 江西省       | 南昌市   | 本科     |      |
| 华东交通大学                  | 4136010404 | 江西省       | 南昌市   | 本科     |      |
| 东华理工大学                  | 4136010405 | 江西省       | 抚州市   | 本科     |      |
| 南昌航空大学                  | 4136010406 | 江西省       | 南昌市   | 本科     |      |
| 江西理工大学                  | 4136010407 | 江西省       | 赣州市   | 本科     |      |
| 景德镇陶瓷大学                | 4136010408 | 江西省       | 景德镇市 | 本科     |      |
| 江西农业大学                  | 4136010410 | 江西省       | 南昌市   | 本科     |      |
| 江西中医药大学                | 4136010412 | 江西省       | 南昌市   | 本科     |      |
| 赣南医学院                    | 4136010413 | 江西省       | 赣州市   | 本科     |      |
| 江西师范大学                  | 4136010414 | 江西省       | 南昌市   | 本科     |      |
| 上饶师范学院                  | 4136010416 | 江西省       | 上饶市   | 本科     |      |
| 宜春学院                      | 4136010417 | 江西省       | 宜春市   | 本科     |      |
| 赣南师范大学                  | 4136010418 | 江西省       | 赣州市   | 本科     |      |
| 井冈山大学                    | 4136010419 | 江西省       | 吉安市   | 本科     |      |
| 江西财经大学                  | 4136010421 | 江西省       | 南昌市   | 本科     |      |
| 江西科技学院                  | 4136010846 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 景德镇学院                    | 4136010894 | 江西省       | 景德镇市 | 本科     |      |
| 萍乡学院                      | 4136010895 | 江西省       | 萍乡市   | 本科     |      |
| 江西科技师范大学              | 4136011318 | 江西省       | 南昌市   | 本科     |      |
| 南昌工程学院                  | 4136011319 | 江西省       | 南昌市   | 本科     |      |
| 江西警察学院                  | 4136011504 | 江西省       | 南昌市   | 本科     |      |
| 新余学院                      | 4136011508 | 江西省       | 新余市   | 本科     |      |
| 九江学院                      | 4136011843 | 江西省       | 九江市   | 本科     |      |
| 江西工程学院                  | 4136012766 | 江西省教育厅 | 新余市   | 本科     | 民办 |
| 南昌理工学院                  | 4136012795 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 江西应用科技学院              | 4136012938 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 江西服装学院                  | 4136013418 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 南昌工学院                    | 4136013421 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 南昌大学科学技术学院          | 4136013429 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 南昌大学共青学院              | 4136013430 | 江西省教育厅 | 九江市   | 本科     | 民办 |
| 华东交通大学理工学院          | 4136013431 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 东华理工大学长江学院          | 4136013432 | 江西省教育厅 | 抚州市   | 本科     | 民办 |
| 南昌航空大学科技学院          | 4136013433 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 江西理工大学应用科学学院      | 4136013434 | 江西省教育厅 | 赣州市   | 本科     | 民办 |
| 景德镇陶瓷大学科技艺术学院    | 4136013435 | 江西省教育厅 | 景德镇市 | 本科     | 民办 |
| 江西农业大学南昌商学院        | 4136013436 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 江西中医药大学科技学院        | 4136013437 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 江西师范大学科学技术学院      | 4136013438 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 赣南师范大学科技学院          | 4136013439 | 江西省教育厅 | 赣州市   | 本科     | 民办 |
| 江西科技师范大学理工学院      | 4136013440 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 江西财经大学现代经济管理 学院 | 4136013441 | 江西省教育厅 | 南昌市   | 本科     | 民办 |
| 豫章师范学院                  | 4136013774 | 江西省       | 南昌市   | 本科     |      |
| 南昌师范学院                  | 4136014437 | 江西省       | 南昌市   | 本科     |      |
| 上饶幼儿师范高等专科学校      | 3636000312 | 江西省       | 上饶市   | 专科     |      |
| 抚州幼儿师范高等专科学校      | 3636000519 | 江西省       | 抚州市   | 专科     |      |
| 江西工业职业技术学院          | 4136010839 | 江西省       | 南昌市   | 专科     |      |
| 江西医学高等专科学校          | 4136010888 | 江西省       | 上饶市   | 专科     |      |
| 九江职业大学                  | 4136011505 | 江西省       | 九江市   | 专科     |      |
| 九江职业技术学院              | 4136011785 | 江西省       | 九江市   | 专科     |      |
| 江西司法警官职业学院          | 4136012929 | 江西省       | 南昌市   | 专科     |      |
| 江西陶瓷工艺美术职业技术 学院 | 4136012930 | 江西省       | 景德镇市 | 专科     |      |
| 江西旅游商贸职业学院          | 4136012932 | 江西省       | 南昌市   | 专科     |      |
| 江西电力职业技术学院          | 4136012933 | 江西省       | 南昌市   | 专科     |      |
| 江西环境工程职业学院          | 4136012934 | 江西省       | 赣州市   | 专科     |      |
| 江西艺术职业学院              | 4136012936 | 江西省       | 南昌市   | 专科     |      |
| 鹰潭职业技术学院              | 4136012937 | 江西省       | 鹰潭市   | 专科     |      |
| 江西信息应用职业技术学院      | 4136012939 | 江西省       | 南昌市   | 专科     |      |
| 江西交通职业技术学院          | 4136012940 | 江西省       | 南昌市   | 专科     |      |
| 江西财经职业学院              | 4136012941 | 江西省       | 九江市   | 专科     |      |
| 江西应用技术职业学院          | 4136012942 | 江西省       | 赣州市   | 专科     |      |
| 江西现代职业技术学院          | 4136012943 | 江西省       | 南昌市   | 专科     |      |
| 江西工业工程职业技术学院      | 4136012944 | 江西省       | 萍乡市   | 专科     |      |
| 江西机电职业技术学院          | 4136012976 | 江西省       | 南昌市   | 专科     |      |
| 江西科技职业学院              | 4136013419 | 江西省教育厅 | 南昌市   | 专科     | 民办 |
| 南昌职业学院                  | 4136013420 | 江西省教育厅 | 南昌市   | 专科     | 民办 |
| 江西外语外贸职业学院          | 4136013422 | 江西省       | 南昌市   | 专科     |      |
| 江西工业贸易职业技术学院      | 4136013423 | 江西省       | 南昌市   | 专科     |      |
| 宜春职业技术学院              | 4136013424 | 江西省       | 宜春市   | 专科     |      |
| 江西应用工程职业学院          | 4136013425 | 江西省       | 萍乡市   | 专科     |      |
| 江西生物科技职业学院          | 4136013426 | 江西省       | 南昌市   | 专科     |      |
| 江西建设职业技术学院          | 4136013427 | 江西省       | 南昌市   | 专科     |      |
| 抚州职业技术学院              | 4136013428 | 江西省       | 抚州市   | 专科     |      |
| 江西中医药高等专科学校        | 4136013775 | 江西省       | 抚州市   | 专科     |      |
| 江西先锋软件职业技术学院      | 4136013776 | 江西省教育厅 | 南昌市   | 专科     | 民办 |
| 江西经济管理职业学院          | 4136013866 | 江西省       | 南昌市   | 专科     |      |
| 江西制造职业技术学院          | 4136013867 | 江西省       | 南昌市   | 专科     |      |
| 江西工程职业学院              | 4136013868 | 江西省       | 南昌市   | 专科     |      |
| 江西青年职业学院              | 4136013869 | 江西省       | 南昌市   | 专科     |      |
| 上饶职业技术学院              | 4136013870 | 江西省       | 上饶市   | 专科     |      |
| 江西航空职业技术学院          | 4136013871 | 江西省       | 南昌市   | 专科     |      |
| 江西农业工程职业学院          | 4136013872 | 江西省       | 宜春市   | 专科     |      |
| 赣西科技职业学院              | 4136013873 | 江西省教育厅 | 新余市   | 专科     | 民办 |
| 江西卫生职业学院              | 4136013965 | 江西省       | 南昌市   | 专科     |      |
| 江西新能源科技职业学院        | 4136014166 | 江西省教育厅 | 新余市   | 专科     | 民办 |
| 江西枫林涉外经贸职业学院      | 4136014167 | 江西省教育厅 | 九江市   | 专科     | 民办 |
| 江西泰豪动漫职业学院          | 4136014168 | 江西省教育厅 | 南昌市   | 专科     | 民办 |
| 江西冶金职业技术学院          | 4136014241 | 江西省       | 新余市   | 专科     |      |
| 江西管理职业学院              | 4136014249 | 江西省       | 南昌市   | 专科     |      |
| 江西传媒职业学院              | 4136014250 | 江西省       | 南昌市   | 专科     |      |
| 江西工商职业技术学院          | 4136014321 | 江西省教育厅 | 南昌市   | 专科     | 民办 |
| 景德镇陶瓷职业技术学院        | 4136014402 | 江西省教育厅 | 景德镇市 | 专科     | 民办 |
| 共青科技职业学院              | 4136014403 | 江西省教育厅 | 九江市   | 专科     | 民办 |
| 赣州师范高等专科学校          | 4136014465 | 江西省       | 赣州市   | 专科     |      |
| 江西水利职业学院              | 4136014476 | 江西省       | 南昌市   | 专科     |      |
| 宜春幼儿师范高等专科学校      | 4136014494 | 江西省       | 宜春市   | 专科     |      |
| 吉安职业技术学院              | 4136014504 | 江西省       | 吉安市   | 专科     |      |
| 江西洪州职业学院              | 4136014505 | 江西省教育厅 | 宜春市   | 专科     | 民办 |
| 江西师范高等专科学校          | 4136014537 | 江西省       | 鹰潭市   | 专科     |      |
| 南昌影视传播职业学院          | 4136014544 | 江西省教育厅 | 南昌市   | 专科     | 民办 |
| 赣南卫生健康职业学院          | 4136014569 | 江西省       | 赣州市   | 专科     |      |
